+++
title = "第一个线上小项目复盘：从需求到上线"
date = 2019-12-20
draft = false
categories = ["项目复盘"]
tags = ["项目管理", "复盘", "上线经验"]
description = "复盘一个实际小项目的整体过程，哪些做得好，哪些踩了坑。"
+++

每个开发大概都会有那么一个「第一次自己从头到尾搞定的小项目」。不一定很大，但你会记得它第一次线上、第一次收到真实用户反馈时的感觉。

这篇文章就是我对自己第一个线上小项目的一次复盘：**从需求、设计、实现到上线运维，哪些地方做得还行，哪些地方踩了坑，以及如果重来一次我会怎么做。**

---

## 项目背景：一个小而完整的业务闭环

项目本身不复杂，可以简化理解为：

- 给内部同事用的一个「简单信息录入 + 查询」系统。
- 功能包括：
  - 登录（最初只是简单校验）
  - 信息录入表单（10 来个字段）
  - 列表查询 + 条件筛选
  - 导出 Excel
- 技术栈：Vue + 简易 Node.js API + MySQL。

它的意义不在技术多高级，而在于：**从 0 到上生产，所有环节都踩了一遍。**

---

## 需求阶段：一开始就踩坑的地方

### 1. 没有「边界」的需求

当时需求只有一句话：

> 做一个给运营同事用的录入和查询系统，支持导出。

看起来很简单，实际开始做的时候才发现问题：

- 字段定义不清楚：哪些必填？哪些是枚举？哪些会后续扩展？
- 查询场景不清楚：他们怎么用？按什么维度查？
- 导出需求不清楚：导出全部？分页导出？按筛选条件导出？

**教训：**哪怕是小项目，开工前也要把几个关键边界问清楚：

- 「最小可用版本」必须具备哪些功能？
- 哪些是后续再说的「加分项」？
- 有没有「绝对不能错」的地方（比如某个字段一定要留存）？

简单拉个 30 分钟的小会，白板上把字段和关键操作列出来，会省掉后面大量来回返工。

---

## 设计阶段：刚开始就写死了的页面结构

第一个版本，我是怎么做的：

- 一个页面写完所有功能：表单在上、表格在下。
- 所有状态（表单值、筛选条件、列表）全塞在一个组件里。
- 校验、提交流程、导出逻辑写在同一个 `methods` 对象。

这样做的结果：

- 代码量不大时还凑合。
- 一旦字段一增加、逻辑一变更，维护起来就很痛苦。

重构后的做法是：

- 拆分成三个组件：
  - `FormPanel`：负责录入表单。
  - `SearchPanel`：负责查询条件。
  - `ResultTable`：负责列表展示和导出按钮。
- 用一个父组件 `PageIndex` 作为「协调者」，统一管理状态。

父组件结构大概是：

```vue
<template>
  <div>
    <FormPanel
      :value="formData"
      @change="onFormChange"
      @submit="onFormSubmit"
    />

    <SearchPanel
      :value="searchParams"
      @search="onSearch"
    />

    <ResultTable
      :data="tableData"
      :loading="tableLoading"
      @export="onExport"
    />
  </div>
</template>
```

**收获：**即便是小项目，只要你能把「页面拆成几个清晰的区域组件」，后面改需求的时候会省很多事。

---

## 实现阶段：几次印象深刻的坑

### 坑 1：表单校验只做了一半

一开始我只在前端做了简单的必填校验，后端没有任何约束。上线后，同事通过各种方式（刷新、网络抖动）提交了一些「半截数据」。

后来改成：

- 前端使用组件库的 Form + 规则校验。
- 后端也对关键字段做非空、格式校验。
- 接口返回错误时，前端统一提示「请检查 xxx 字段」。

**经验：**对重要数据，**前后端都要有防线**，前端负责体验，后端负责兜底。

---

### 坑 2：没有考虑分页 & 导出性能

最开始数据量很小，接口直接返回全部列表，导出也是一次性导出所有记录。等数据积累了一段时间，运营同事反馈：

> 页面打开很慢、导出几千条时动不动就超时。

后来做了两件事：

1. 接口分页 + 前端分页组件，列表默认只请求一页。
2. 导出改为「按筛选条件导出」+ 后端侧生成文件，前端只下载。

这次让我彻底意识到：**一开始偷懒很爽，等数据量上来就是「技术债 + 操作风险」的双重打击。**

---

### 坑 3：日志和排错信息设计不够

刚上线那段时间，有同事反馈操作失败，但只给了我一句：

> 点导出没反应。

当时接口日志里几乎没有记录，前端也没埋任何埋点，只能通过猜。

后来补了：

- 前端：对关键操作加 log 上报（按钮点击、接口成功/失败）。
- 后端：接口入参、错误堆栈、耗时写入日志。
- 遇到异常时，前端弹出 toast 的同时，给出一个简单错误码，方便和日志串起来查。

**感受：**即便是内部小系统，**日志和监控也很重要**，至少要做到出问题时有线索可查。

---

## 上线与运维：一些小经验

### 1. 灰度 / 内部小范围试用

第一次上线时，我是直接把新系统扔给所有人用，结果同时收到很多问题反馈。

后来做新功能时，我会：

1. 先找 2～3 个愿意帮忙试用的同事，让他们在真实场景下使用一两天。
2. 收集反馈后，小范围迭代一版，再逐步推广。

这样可以把「非常明显的坑」截断在小范围内。

---

### 2. 简单但清晰的 README / 使用说明

一开始我哪怕连一份简单的「使用说明」也没写，大家遇到问题都来问我。后来我补了一份非常简单的文档，包括：

- 系统入口地址。
- 支持的浏览器（至少说明一下不要用特别古老的 IE）。
- 主要功能说明（附带截图）。
- 常见问题 FAQ（比如导出失败 / 数据没刷新等）。

哪怕只是写在一个内部 Wiki 或 README 里，都能明显减少沟通成本。

---

### 3. 给未来的自己留一点注释

小项目最大的特点就是：**上线后可能很久没人动，一动就是你自己。**

后来再回头看当时的代码，能感谢过去的自己：

- 在关键逻辑（比如字段映射、导出格式）旁边写了几行说明。
- 在一些看起来「很奇怪」的 if/else 上加了一句注释，说明是为了解决某种特殊情况。

这些注释，在半年后重新接手时，真的救命。

---

## 如果让我重做一次，我会怎么做？

1. **开工前拉齐需求边界**：至少要清楚「必做 / 加分 / 暂不支持」三类。
2. **一开始就按组件拆页面**：即便项目小，也尽量让结构清晰。
3. **前后端一起设计数据模型和校验规则**：避免产生一堆脏数据。
4. **早期就上简单的日志和监控**：至少知道问题发生在哪里。
5. **保留一份简洁的文档和少量注释**：对自己和其他同事都更友好。

---

## 总结

第一个小项目不会完美，它的意义不在于技术多高级，而在于你第一次完整走了一遍：

> 需求 → 设计 → 实现 → 上线 → 反馈 → 小迭代 的闭环。

只要你愿意花一点时间复盘，下一个项目就会轻松很多。而这篇文章，就是我给那个「第一次」留的一份记录。
