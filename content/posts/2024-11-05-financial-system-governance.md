+++
title = "维护一套「金融级」系统的日常：技术债与治理"
date = 2024-11-05
draft = false
categories = ["工程管理", "金融场景"]
tags = ["系统治理", "技术债", "金融系统", "稳定性"]
description = "从日常维护的视角，聊聊一套金融级系统在技术债、稳定性和合规要求之下的治理思路。"
+++

说起「金融级系统」，大家容易想到的是：

- 高并发  
- 高可用  
- 高安全  

但在真实的日常里，还有一个很现实的关键词：**高技术债**。

- 业务历史长、变更多  
- 合规要求频繁更新  
- 很多模块不能随便重写

这篇文章就从比较接地气的角度聊聊：  
在这样的系统里，技术债和日常治理是怎么做的。

---

## 1. 金融场景里的特殊约束

与普通业务系统相比，金融场景多了几重约束：

1. **改动窗口有限**  
   - 很多系统几乎 7x24 对外服务  
   - 大规模重构很难找到合适时间

2. **变更必须可追溯**  
   - 每次上线要有需求单、评审记录、上线记录  
   - 问题追踪时需要知道「谁在什么时候改了什么」

3. **合规优先级很高**  
   - 有些地方技术上可以更「聪明」，但监管不允许  
   - 文案、交互、流程都要满足监管要求

在这样的前提下，治理技术债更像「做长期的小手术」，而不是一刀重构。

---

## 2. 技术债分类：先搞清楚你在还什么债

简单分几类：

1. **架构层**  
   - 模块边界不清晰、耦合严重  
   - 某几个服务成为「超级大脑」，什么都往里堆

2. **代码实现层**  
   - 大量 if-else、魔法数字、历史兼容逻辑堆在一起  
   - 几乎没有单测，修改时心里没底

3. **数据 / 配置层**  
   - 配置散落在代码、数据库、Excel 里  
   - 不同环境的配置差异无法一眼看清

4. **流程与文档层**  
   - 变更流程不统一  
   - 重要模块靠「口口相传」交接

不同类型的债，解决策略完全不同，不可能靠「重构一次解决一切」。

---

## 3. 三个抓手：缺陷、变更、性能

不做大手术的前提下，日常治理主要围绕三件事：

### 3.1 缺陷闭环

- 给线上问题做**原因分类**：  
  - 需求理解偏差  
  - 边界条件缺失  
  - 环境差异  
  - 历史逻辑冲突  
- 对高频类别做专项治理：比如「配置错误类问题」集中爆发，就推动配置平台化

### 3.2 变更管理

- 对高风险模块设置更严格的审批和回归要求  
- 把「问题最多的改动类型」可视化：  
  - 是谁频繁动核心配置？  
  - 是不是某类「紧急需求」总是容易出错？

### 3.3 性能监控

- 对关键接口/页面设定性能基线  
- 一旦持续劣化，触发专项排查  
- 配合前面说的 AI 性能报告，让「性能」成为团队常规话题

---

## 4. 一个例子：报表模块的小范围治理

以一个典型的报表模块为例：

**现状问题：**

- 查询慢，有时直接超时  
- 不同角色看到的数据口径略有差异  
- 新需求接入很痛苦

改进步骤大致是：

1. **先统计问题，而不是先写代码**  
   - 收集近几个月与报表相关的缺陷  
   - 按类型分类：数据问题 / 性能问题 / 权限问题 / 交互问题

2. **这次只解决一小撮问题**  
   - 第一期重点放在「数据口径统一 + 性能」  
   - 把 UI 体验与新需求接入难度放到下一阶段

3. **后端与前端一起优化链路**  
   - 调整 SQL、索引、报表预计算机制  
   - 前端默认查询范围收紧，增加提示  
   - 为重查询加缓存/导出异步化

4. **加监控，验证改动有效性**  
   - 接口耗时分布  
   - 超时/异常次数  
   - 报表使用量

这就是典型的「小手术」：有节奏、有边界、可验证。

---

## 5. 关于「大重构」这件事

在金融系统里谈「大重构」，门槛非常高。

一些经验：

1. 动机必须非常明确：  
   - 当前架构已经严重影响业务发展  
   - 或者稳定性已达到不可接受的水平

2. 方案要有清晰的阶段划分：  
   - 哪些模块先迁移  
   - 旧系统与新系统如何并行  
   - 回滚策略和数据迁移方案

3. 全程要有统一 owner 推动，避免「改一半」烂尾

更多时候，**渐进式重构**更现实：

- 在每次需求迭代中，顺手重构一小块  
- 把旧代码慢慢推到边缘，新的模块慢慢长出来

---

## 6. 沟通方式：用「风险语言」而不是「技术语言」

金融行业有很多非技术角色：产品、运营、风险、合规、审计……  
要推动治理，需要把技术问题翻译成他们能理解的语言：

- 某模块继续堆下去，**线上出 P1 的概率有多大？**  
- 某类问题如果不治理，**未来一年会多付出多少人力成本？**  
- 当前性能状况是否已经影响到了关键交易时段的体验？

用这些视角比「代码很丑」「架构很乱」更容易拿资源。

---

## 7. 小结

维护一套金融级系统，更像是在做：

> 长期的、受很多约束的「系统养老工作」。

几条个人体会：

1. 技术债不可避免，关键是分类、排优先级、分阶段偿还  
2. 缺陷统计、变更管理、性能监控，是日常治理最重要的三个抓手  
3. 在金融场景里，很多时候要先学会用「风险和成本」的语言沟通，  
   再谈技术方法论

如果你也在类似的项目里，可以从一件小事开始：

- 先选一个问题最多的模块  
- 把过去三个月相关缺陷/告警整理一下  
- 做一次小范围、可验证的治理尝试

技术债不会一夜消失，但只要每个迭代都往前推一点，系统的整体健康度就会慢慢显现出来。
