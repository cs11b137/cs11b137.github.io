<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>工程化 on Saiga</title>
    <link>http://localhost:1313/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/</link>
    <description>Recent content in 工程化 on Saiga</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <managingEditor>wuwenzen@outlook.com (wuwj)</managingEditor>
    <webMaster>wuwenzen@outlook.com (wuwj)</webMaster>
    <lastBuildDate>Mon, 30 Jun 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>金融级前端系统的架构约束与设计取舍</title>
      <link>http://localhost:1313/posts/2025-06-30-financial-frontend-architecture/</link>
      <pubDate>Mon, 30 Jun 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-06-30-financial-frontend-architecture/</guid>
      <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;&#xA;&lt;p&gt;在“金融级”业务系统中，前端架构常常被一组约束牵引：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;稳定性与可预测性优先&lt;/li&gt;&#xA;&lt;li&gt;安全与隐私默认开启&lt;/li&gt;&#xA;&lt;li&gt;变更可追溯、可回滚&lt;/li&gt;&#xA;&lt;li&gt;权限边界清晰，最小化误操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这意味着很多场景下，架构目标并不是“最酷/最先进”，而是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;长期可控、可演进、可治理。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-架构目标把不确定性关在笼子里&#34;&gt;1. 架构目标：把不确定性关在笼子里&lt;/h2&gt;&#xA;&lt;h3 id=&#34;可控性的体现&#34;&gt;可控性的体现&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;功能开关（feature flag）：按用户/角色/灰度启用&lt;/li&gt;&#xA;&lt;li&gt;发布回滚：前端资源与配置可快速回退&lt;/li&gt;&#xA;&lt;li&gt;观测能力：错误、性能、关键链路有明确指标&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;不确定性的来源&#34;&gt;不确定性的来源&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;动态路由/动态渲染过度导致行为难预测&lt;/li&gt;&#xA;&lt;li&gt;依赖链复杂导致升级风险上升&lt;/li&gt;&#xA;&lt;li&gt;关键数据在多处重复维护导致一致性问题&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-权限体系从页面权限到动作权限&#34;&gt;2. 权限体系：从“页面权限”到“动作权限”&lt;/h2&gt;&#xA;&lt;p&gt;常见的权限粒度：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;页面级：能不能进入页面&lt;/li&gt;&#xA;&lt;li&gt;组件级：能不能看到某个模块&lt;/li&gt;&#xA;&lt;li&gt;动作级：能不能点击某个按钮（提交/审批/导出）&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;推荐以“动作权限”作为最小单元：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;resource&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;investor:profile&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;actions&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;view&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;edit&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;submit&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;export&amp;#34;&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;并在前端形成统一能力：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;路由守卫：页面进入校验&lt;/li&gt;&#xA;&lt;li&gt;指令/组件：动作级权限控制（按钮/入口）&lt;/li&gt;&#xA;&lt;li&gt;请求层：对敏感接口做二次校验（防止绕过 UI）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-网络层把稳定变成默认行为&#34;&gt;3. 网络层：把“稳定”变成默认行为&lt;/h2&gt;&#xA;&lt;p&gt;前端网络层建议统一封装：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;超时与重试策略（对幂等接口可重试）&lt;/li&gt;&#xA;&lt;li&gt;统一错误码映射（给用户可理解提示）&lt;/li&gt;&#xA;&lt;li&gt;会话失效处理（单点登出/刷新凭证）&lt;/li&gt;&#xA;&lt;li&gt;请求幂等 key（防止重复提交）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;示例（策略示意）：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;请求发出 -&amp;gt; 超时(8s) -&amp;gt; 可重试(最多1次) -&amp;gt; 失败提示(可操作)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 id=&#34;4-状态管理把关键状态集中&#34;&gt;4. 状态管理：把“关键状态”集中&lt;/h2&gt;&#xA;&lt;p&gt;金融系统常见关键状态：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;当前流程步骤（可恢复）&lt;/li&gt;&#xA;&lt;li&gt;登录会话与权限&lt;/li&gt;&#xA;&lt;li&gt;关键查询条件与筛选&lt;/li&gt;&#xA;&lt;li&gt;字典/枚举（全局一致）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;建议：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;全局状态只放“跨页面共享且重要”的内容&lt;/li&gt;&#xA;&lt;li&gt;页面状态尽量本地化（避免全局污染）&lt;/li&gt;&#xA;&lt;li&gt;对流程类页面使用明确的状态模型（便于恢复与测试）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;5-组件体系一致性比组件多更重要&#34;&gt;5. 组件体系：一致性比“组件多”更重要&lt;/h2&gt;&#xA;&lt;p&gt;组件体系建设建议关注：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;表单一致性：校验、错误提示、布局&lt;/li&gt;&#xA;&lt;li&gt;表格一致性：分页、排序、导出、列配置&lt;/li&gt;&#xA;&lt;li&gt;弹窗一致性：确认/取消、二次确认、危险操作&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;在金融业务中，“一致性”带来的收益很大：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
