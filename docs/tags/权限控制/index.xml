<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>权限控制 on Saiga</title>
    <link>http://localhost:1313/tags/%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</link>
    <description>Recent content in 权限控制 on Saiga</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <managingEditor>wuwenzen@outlook.com (wuwj)</managingEditor>
    <webMaster>wuwenzen@outlook.com (wuwj)</webMaster>
    <lastBuildDate>Tue, 25 Mar 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>金融业务系统的前端权限与操作可追溯：设计要点与落地方式</title>
      <link>http://localhost:1313/posts/2025-03-25-fintech-frontend-permission-and-audit/</link>
      <pubDate>Tue, 25 Mar 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-03-25-fintech-frontend-permission-and-audit/</guid>
      <description>&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;&#xA;&lt;p&gt;在金融业务系统中，“能不能做”与“做了什么”通常同等重要：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;权限需要细粒度（页面、模块、动作）&lt;/li&gt;&#xA;&lt;li&gt;高风险操作需要二次确认与留痕&lt;/li&gt;&#xA;&lt;li&gt;线上问题需要可追溯（谁、在何时、做了什么）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;前端并非审计的最终来源，但前端是“入口层”，对降低误操作与提升可追溯性非常关键。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-权限模型动作权限作为最小单元&#34;&gt;1. 权限模型：动作权限作为最小单元&lt;/h2&gt;&#xA;&lt;p&gt;推荐以“动作权限”作为最小单元（而不是只做菜单/页面）：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;resource&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order:review&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;actions&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;view&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;approve&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;reject&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;export&amp;#34;&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;落地到前端的三层控制：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;路由守卫：控制页面是否可进入&lt;/li&gt;&#xA;&lt;li&gt;组件/指令：控制按钮、入口是否可见/可用&lt;/li&gt;&#xA;&lt;li&gt;请求层兜底：对敏感接口做二次校验（避免绕过 UI）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-操作风险分级不同级别用不同交互&#34;&gt;2. 操作风险分级：不同级别用不同交互&lt;/h2&gt;&#xA;&lt;p&gt;建议对操作做风险分级（示例）：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;低风险：查询、查看详情&lt;/li&gt;&#xA;&lt;li&gt;中风险：提交、发起流程、修改关键字段&lt;/li&gt;&#xA;&lt;li&gt;高风险：审批通过、批量处理、导出敏感数据&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;不同级别对应不同交互策略：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;中风险：二次确认 + 明确影响范围&lt;/li&gt;&#xA;&lt;li&gt;高风险：强确认（输入关键字/再次校验）+ 明确告知留痕&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-操作留痕前端如何参与可追溯&#34;&gt;3. 操作留痕：前端如何参与“可追溯”&lt;/h2&gt;&#xA;&lt;p&gt;前端侧建议做三件事：&lt;/p&gt;&#xA;&lt;h3 id=&#34;31-为关键动作生成-traceid&#34;&gt;3.1 为关键动作生成 traceId&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;每次关键操作生成 &lt;code&gt;traceId&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;随请求携带到后端&lt;/li&gt;&#xA;&lt;li&gt;前后端日志用同一 traceId 串联&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;32-标准化审计字段脱敏&#34;&gt;3.2 标准化审计字段（脱敏）&lt;/h3&gt;&#xA;&lt;p&gt;建议上报结构化字段：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;action（动作编码）&lt;/li&gt;&#xA;&lt;li&gt;resource（资源编码）&lt;/li&gt;&#xA;&lt;li&gt;targetId（业务对象 id）&lt;/li&gt;&#xA;&lt;li&gt;result（success/fail）&lt;/li&gt;&#xA;&lt;li&gt;reason（失败原因码）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;避免：把敏感字段明文写入日志/埋点。&lt;/p&gt;&#xA;&lt;h3 id=&#34;33-失败也要可追溯&#34;&gt;3.3 失败也要可追溯&lt;/h3&gt;&#xA;&lt;p&gt;很多事故来自失败重试与重复提交：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;失败原因要可读（错误码映射）&lt;/li&gt;&#xA;&lt;li&gt;可操作指引要明确（下一步做什么）&lt;/li&gt;&#xA;&lt;li&gt;必要时提供“一键复制 traceId”入口，方便支持排查&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;4-误操作防护前端的最后一道门&#34;&gt;4. 误操作防护：前端的“最后一道门”&lt;/h2&gt;&#xA;&lt;p&gt;常见防护手段：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;按钮防抖 + 请求幂等 key（避免重复提交）&lt;/li&gt;&#xA;&lt;li&gt;表单关键字段修改提示（脏数据提示）&lt;/li&gt;&#xA;&lt;li&gt;高风险操作的预检查（权限、状态、前置条件）&lt;/li&gt;&#xA;&lt;li&gt;批量操作的预览（影响范围、条数、筛选条件回显）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;5-可维护性权限与路由不要绑死在页面&#34;&gt;5. 可维护性：权限与路由不要绑死在页面&lt;/h2&gt;&#xA;&lt;p&gt;建议将权限控制抽象成“能力层”：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
