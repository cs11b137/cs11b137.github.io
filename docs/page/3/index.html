<!DOCTYPE html>
<html lang="zh-cn">
    <head>
	<meta name="generator" content="Hugo 0.152.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Saiga</title><meta name="Description" content="This is my cool site"><meta property="og:url" content="http://localhost:1313/">
  <meta property="og:site_name" content="Saiga">
  <meta property="og:title" content="Saiga">
  <meta property="og:description" content="This is my cool site">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="website">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Saiga">
  <meta name="twitter:description" content="This is my cool site">
      <meta name="twitter:site" content="@https://github.com/cs11b137">
<meta name="application-name" content="Saiga">
<meta name="apple-mobile-web-app-title" content="Saiga"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/logo.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="Saiga">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="Saiga"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "http:\/\/localhost:1313\/","inLanguage": "zh-cn","author": {
                "@type": "Person",
                "name": "wuwj"
            },"description": "This is my cool site","name": "Saiga"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Saiga">Saiga</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Saiga">Saiga</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="page home" data-home="posts"><div class="home-profile"><div class="home-avatar"><a href="/posts/" title="Posts"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./avatar.jpg"
        data-srcset="./avatar.jpg, ./avatar.jpg 1.5x, ./avatar.jpg 2x"
        data-sizes="auto"
        alt="./avatar.jpg"
        title="./avatar.jpg" /></a></div><div class="home-subtitle"><div id="id-1" class="typeit"></div></div><div class="links"><a href="https://github.com/https://github.com/cs11b137" title="GitHub" target="_blank" rel="noopener noreffer me"><i class="fab fa-github fa-fw" aria-hidden="true"></i></a><a href="https://facebook.com/https://github.com/cs11b137" title="facebook" target="_blank" rel="noopener noreffer me"><i class="fab fa-facebook fa-fw" aria-hidden="true"></i></a><a href="mailto:https://github.com/cs11b137" title="Email" rel="me"><i class="far fa-envelope fa-fw" aria-hidden="true"></i></a><a href="https://github.com/cs11b137" target="_blank" rel="noopener noreffer me"></a><a href="https://linkedin.com/in/https://github.com/cs11b137" title="LinkedIn" target="_blank" rel="noopener noreffer me"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="https://twitter.com/https://github.com/cs11b137" title="Twitter" target="_blank" rel="noopener noreffer me"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="https://www.instagram.com/https://github.com/cs11b137" title="Instagram" target="_blank" rel="noopener noreffer me"><i class="fab fa-instagram fa-fw" aria-hidden="true"></i></a><a href="https://t.me/https://github.com/cs11b137" title="Telegram" target="_blank" rel="noopener noreffer me"><i class="fab fa-telegram-plane fa-fw" aria-hidden="true"></i></a><a href="https://www.youtube.com/user/https://github.com/cs11b137" title="YouTube" target="_blank" rel="noopener noreffer me"><i class="fab fa-youtube fa-fw" aria-hidden="true"></i></a><a href="/index.xml" title="RSS" target="_blank" rel="noopener noreffer me"><i class="fas fa-rss fa-fw" aria-hidden="true"></i></a></div></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2024-05-01-ai-performance-analyzer/">让 AI 帮我做前端性能分析报告</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2024-05-01">2024-05-01</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>性能优化</a>&nbsp;<a href="/categories/ai-%E5%BA%94%E7%94%A8/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI 应用</a></span></div><div class="content"><p>前端做性能优化，两个常见痛点：</p>
<ol>
<li>报表很数据化，非技术同学看不懂</li>
<li>每次写性能报告都很花时间：看指标 → 找问题 → 翻译成大家听得懂的结论</li>
</ol>
<p>于是试了一件事：</p>
<blockquote>
<p>我负责把数据准备好，AI 帮我写一份「结构化的性能分析报告」，我只做最后校对。</p>
</blockquote>
<hr>
<h2 id="1-输入与输出长啥样">1. 输入与输出长啥样？</h2>
<h3 id="11-输入数据">1.1 输入数据</h3>
<p>主要有两部分：</p>
<ol>
<li>
<p><strong>Lighthouse JSON 报告</strong></p>
<ul>
<li>性能得分</li>
<li>LCP / CLS / TBT / TTI 等指标</li>
<li>各种「机会」与「诊断」信息</li>
</ul>
</li>
<li>
<p><strong>真实用户监控数据（RUM）</strong>（可选）</p>
<ul>
<li>最近一段时间的 LCP P75、FCP P75</li>
<li>不同地区/设备的耗时对比</li>
</ul>
</li>
</ol>
<h3 id="12-期望输出">1.2 期望输出</h3>
<p>希望 AI 给我的报告包含：</p>
<ol>
<li>一段 1～2 句话的性能整体概览</li>
<li>用人话解释关键指标的含义和当前水平</li>
<li>列出 3～5 个主要问题（按影响排序）</li>
<li>每个问题配上具体可执行的优化建议</li>
<li>告诉我「先做哪几件事最划算」</li>
</ol>
<hr>
<h2 id="2-先做精简给-ai-的不是原始-json">2. 先做精简：给 AI 的不是原始 JSON</h2>
<p>原始 Lighthouse JSON 体积很大，直接给模型既浪费 Token，也容易让它迷路。<br>
所以写了一个小脚本，把它整理成简版结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsonc" data-lang="jsonc"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;https://example.com&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;score&#34;</span>: <span style="color:#ae81ff">0.72</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;metrics&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;LCP&#34;</span>: <span style="color:#ae81ff">3800</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;CLS&#34;</span>: <span style="color:#ae81ff">0.11</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FID&#34;</span>: <span style="color:#ae81ff">25</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;TTI&#34;</span>: <span style="color:#ae81ff">4200</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;opportunities&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;减少未使用的 JavaScript&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;estimatedSavingsMs&#34;</span>: <span style="color:#ae81ff">800</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;消除阻塞渲染的资源&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;estimatedSavingsMs&#34;</span>: <span style="color:#ae81ff">600</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;diagnostics&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;主线程工作过多&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;部分图片未压缩&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;rum&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;LCP_p75&#34;</span>: <span style="color:#ae81ff">4200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FCP_p75&#34;</span>: <span style="color:#ae81ff">2100</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;sampleCount&#34;</span>: <span style="color:#ae81ff">120000</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这样输入既足够有信息量，又相对稳定。</p></div><div class="post-footer">
        <a href="/posts/2024-05-01-ai-performance-analyzer/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">性能分析</a>,&nbsp;<a href="/tags/lighthouse/">Lighthouse</a>,&nbsp;<a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</a>,&nbsp;<a href="/tags/%E5%89%8D%E7%AB%AF%E4%BC%98%E5%8C%96/">前端优化</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2024-03-18-smart-code-review/">AI Code Review 实战：规则、提示词与边界</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2024-03-18">2024-03-18</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>工程实践</a></span></div><div class="content"><p>今年做了一次尝试：</p>
<blockquote>
<p>不改变现有流程的前提下，让大模型参与到 Code Review 里，当一个「辅助 reviewer」。</p>
</blockquote>
<p>它不会替代人类审核，只做三件事：</p>
<ul>
<li>帮忙找明显 bug / 边界问题</li>
<li>帮忙发现重复逻辑、代码味道</li>
<li>帮忙写结构化的改进建议</li>
</ul>
<hr>
<h2 id="1-我们希望-ai-扮演什么角色">1. 我们希望 AI 扮演什么角色？</h2>
<p>一开始就想清楚边界：</p>
<ol>
<li>
<p><strong>不负责通过/拒绝 PR</strong></p>
<ul>
<li>不修改状态，只给评论和建议</li>
<li>最终决策仍然是人类 reviewer</li>
</ul>
</li>
<li>
<p><strong>关注「模式」而不是细枝末节</strong></p>
<ul>
<li>比如错误处理缺失、越界风险、循环里请求等</li>
<li>而不是变量名叫 <code>a</code> 还是 <code>data</code></li>
</ul>
</li>
<li>
<p><strong>输出要尽量具体</strong></p>
<ul>
<li>指出文件、位置、问题和建议</li>
<li>避免空话：「可以优化」「可以重构」这种直接过滤掉</li>
</ul>
</li>
</ol>
<hr>
<h2 id="2-整体方案在-ci-里多插一段ai-review">2. 整体方案：在 CI 里多插一段「AI Review」</h2>
<p>流程：</p>
<ol>
<li>CI 获取本次 PR 的变更文件 + diff</li>
<li>对每个文件构造一个「上下文 + diff」的 payload</li>
<li>调用大模型，让它产出结构化的 review 结果</li>
<li>再由机器人账号把评论贴回 PR（或者汇总成一条）</li>
</ol>
<p>为控制成本和复杂度：</p>
<ul>
<li>优先只分析变更行附近的代码</li>
<li>超长文件只截取相关片段</li>
</ul>
<hr>
<h2 id="3-prompt-设计告诉-ai只看这四件事">3. Prompt 设计：告诉 AI「只看这四件事」</h2>
<p>一个简化的系统提示大致是：</p>
<blockquote>
<p>你是一名资深前端/全栈工程师，正在做 Code Review。<br>
请只关注以下问题：</p>
<ol>
<li>明显的 bug 或潜在边界问题</li>
<li>异常处理和错误提示是否合理</li>
<li>性能隐患（多余循环、重复请求等）</li>
<li>安全/权限风险</li>
</ol>
<p>不要评论代码风格、缩进、单双引号之类的问题，这些交给 Lint 工具。</p></div><div class="post-footer">
        <a href="/posts/2024-03-18-smart-code-review/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/code-review/">Code Review</a>,&nbsp;<a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</a>,&nbsp;<a href="/tags/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/">代码质量</a>,&nbsp;<a href="/tags/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/">开发流程</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2024-02-05-ai-powered-form-builder/">用大模型做一个「表单配置助手」</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2024-02-05">2024-02-05</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/ai-%E5%BA%94%E7%94%A8/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI 应用</a></span></div><div class="content"><p>在很多中台系统里，「加一个表单页面」是非常常见的需求：</p>
<ul>
<li>运营要配活动</li>
<li>风控要配规则</li>
<li>产品要加信息收集表单</li>
</ul>
<p>常规流程比较重：写需求 → 画原型 → 前端实现 → 联调 → 上线。<br>
对于那些只是字段多、变更频率高的小表单，其实有点浪费。</p>
<p>所以我们尝试做了一个小工具：</p>
<blockquote>
<p>运营用自然语言描述表单，大模型帮忙产出一份「表单配置 JSON」，前端根据配置自动渲染。</p>
</blockquote>
<p>这篇文章就简单记录一下实现思路。</p>
<hr>
<h2 id="1-目标从一句话到一份表单配置">1. 目标：从一句话到一份表单配置</h2>
<p>我们给自己的目标很克制：</p>
<ul>
<li><strong>输入</strong>：一段自然语言描述，例如
<blockquote>
<p>“做一个录入投资人基本信息的表单，需要姓名、手机号、证件类型和证件号，手机号必填要校验格式，证件类型从下拉里选身份证/护照。”</p>
</blockquote>
</li>
<li><strong>输出</strong>：一份前端能直接使用的配置 JSON：
<ul>
<li>字段列表</li>
<li>字段类型、标签、占位</li>
<li>是否必填、校验规则</li>
<li>下拉选项等</li>
</ul>
</li>
</ul>
<p>前端只负责：</p>
<ol>
<li>把描述提交给后端</li>
<li>拿到配置 JSON</li>
<li>交给通用 <code>&lt;FormRenderer :config=&quot;formConfig&quot; /&gt;</code> 渲染</li>
</ol>
<hr>
<h2 id="2-配置格式先把机器读得懂定义好">2. 配置格式：先把「机器读得懂」定义好</h2>
<p>要让大模型产出可用结果，首先要有一份清晰的配置格式。示例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsonc" data-lang="jsonc"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;投资人信息录入&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;layout&#34;</span>: <span style="color:#e6db74">&#34;vertical&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;fields&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;name&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;姓名&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;placeholder&#34;</span>: <span style="color:#e6db74">&#34;请输入姓名&#34;</span>
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;mobile&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;手机号&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;rules&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;regex&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;pattern&#34;</span>: <span style="color:#e6db74">&#34;^1\\d{10}$&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;请输入 11 位手机号&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;idType&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;证件类型&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;select&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;options&#34;</span>: [
</span></span><span style="display:flex;"><span>        { <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;居民身份证&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;ID_CARD&#34;</span> },
</span></span><span style="display:flex;"><span>        { <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;护照&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;PASSPORT&#34;</span> }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;idNo&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;证件号码&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;input&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;required&#34;</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>前端已经有配套组件：</p></div><div class="post-footer">
        <a href="/posts/2024-02-05-ai-powered-form-builder/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E8%A1%A8%E5%8D%95%E9%85%8D%E7%BD%AE/">表单配置</a>,&nbsp;<a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/">大模型</a>,&nbsp;<a href="/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/">低代码</a>,&nbsp;<a href="/tags/%E9%85%8D%E7%BD%AE%E5%8C%96/">配置化</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2023-12-20-2023-summary/">2023 年技术小结：从前端工程到 AI 应用</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2023-12-20">2023-12-20</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>年度总结</a></span></div><div class="content"><p>如果用一句话概括 2023 年的技术主线，大概是：</p>
<blockquote>
<p><strong>一边继续把前端工程体系打磨扎实，一边认真把 AI 接到「真业务」里。</strong></p>
</blockquote>
<p>这一年做了几件印象比较深的事情：</p>
<ul>
<li>把多个前端项目合到 Monorepo；</li>
<li>尝试微前端，把老系统和新模块串起来；</li>
<li>在中台里跑了几轮完整的 A/B 实验；</li>
<li>接入大模型 API，做了文档问答、内部工具智能化的小应用；</li>
<li>把 AI 真正纳入自己的日常开发流程。</li>
</ul>
<p>这篇总结就按这两条主线——<strong>前端工程</strong> 和 <strong>AI 应用</strong> 来回顾一下。</p>
<hr>
<h2 id="1-前端工程线更稳也更合在一起">1. 前端工程线：更「稳」也更「合在一起」</h2>
<h3 id="11-monorepo-落地">1.1 Monorepo 落地</h3>
<p>年初开始，把几个关联度高的中台项目合进一个 Monorepo：</p>
<ul>
<li>tools：pnpm + Turborepo；</li>
<li>结构：<code>apps/</code> + <code>packages/</code>；</li>
<li>公共库：UI 组件、工具函数、统一 ESLint 配置。</li>
</ul>
<p>收益：</p>
<ul>
<li>组件库和工具修一次，多项目同步升级；</li>
<li>工程规范「一处改，全员受益」；</li>
<li>新项目孵化成本明显降低。</li>
</ul>
<p>也逼着自己思考：<strong>「什么才值得抽成库，什么就留在应用里？」</strong><br>
这对边界感的训练很有帮助。</p>
<h3 id="12-微前端小规模应用">1.2 微前端小规模应用</h3>
<p>不是全线切微前端，而是谨慎选择了几块：</p>
<ul>
<li>老 Vue2 中台 + 新 Vue3 模块；</li>
<li>部分实验性应用用 React 写。</li>
</ul>
<p>用「框架型微前端」把它们挂在一个壳子下：</p>
<ul>
<li>主应用管登录、导航、全局样式；</li>
<li>子应用各自管内部路由和业务。</li>
</ul>
<p>实践下来感受是：</p>
<ul>
<li>在「多团队 + 多技术栈 + 独立发布」场景下确实好用；</li>
<li>但也确实增加了复杂度，需要配套工程规范。</li>
</ul>
<h3 id="13-实验和监控让前端更可观测">1.3 实验和监控：让前端更「可观测」</h3>
<p>这一年比较系统地做了两件事：</p></div><div class="post-footer">
        <a href="/posts/2023-12-20-2023-summary/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/">年度总结</a>,&nbsp;<a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a>,&nbsp;<a href="/tags/ai-%E5%BA%94%E7%94%A8/">AI 应用</a>,&nbsp;<a href="/tags/%E6%8A%80%E6%9C%AF%E6%88%90%E9%95%BF/">技术成长</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2023-11-01-ai-in-internal-tools/">在内部运营/中台工具里加一点 AI：从搜索到推荐</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2023-11-01">2023-11-01</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/ai-%E5%BA%94%E7%94%A8/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI 应用</a></span></div><div class="content"><p>相比 C 端产品，「内部运营/中台工具」看起来没那么光鲜，界面经常是：</p>
<blockquote>
<p>一堆表格、一堆配置、一堆筛选项。</p>
</blockquote>
<p>但正因为如此，AI 在这里往往很好落地：</p>
<ul>
<li>用户数量受控，易于试点；</li>
<li>业务流程清晰，方便评估效果；</li>
<li>哪怕只提升一点效率，整体价值也不小。</li>
</ul>
<p>这篇文章就分享几个我们在内部工具里「加一点 AI」的尝试：从搜索到推荐再到智能填写。</p>
<hr>
<h2 id="1-智能搜索从条件筛选到自然语言搜索">1. 智能搜索：从「条件筛选」到「自然语言搜索」</h2>
<h3 id="11-传统方式的痛点">1.1 传统方式的痛点</h3>
<p>运营同学以前查数据要：</p>
<ol>
<li>打开一个复杂查询页；</li>
<li>选择 N 个下拉框（业务线、产品、日期区间、状态…）；</li>
<li>点击查询，发现忘记勾某个条件，再重新来一次。</li>
</ol>
<p>于是我们考虑加一个入口：<strong>自然语言搜索</strong>。</p>
<p>例如：</p>
<blockquote>
<p>「最近 7 天上海地区的私募新增高净值客户」<br>
「失败次数超过 3 次的合同签署记录」</p>
</blockquote>
<h3 id="12-技术方案">1.2 技术方案</h3>
<ol>
<li>用大模型把自然语言解析成结构化查询条件；</li>
<li>再把这些条件映射到后端已有查询接口；</li>
<li>最终仍然走「原有 SQL / ES 查询逻辑」。</li>
</ol>
<p>伪代码示意：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">prompt</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">你是查询构建助手。请将用户的自然语言查询转换为 JSON 条件。...
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">`</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">llmResult</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">callLLM</span>(<span style="color:#a6e22e">prompt</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">userQuery</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">conditions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">llmResult</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">callSearchAPI</span>(<span style="color:#a6e22e">conditions</span>);
</span></span></code></pre></div><p>关键点：</p>
<ul>
<li><strong>不直接让模型生成 SQL</strong>（安全风险 &amp; 不可控）；</li>
<li>而是生成一个受控的 JSON 条件对象。</li>
</ul>
<h3 id="13-前端体验">1.3 前端体验</h3>
<ul>
<li>搜索框下方展示「解析出的条件」，让用户确认；</li>
<li>支持一键切换到「高级筛选」视图，展示同样条件；</li>
<li>避免让 AI 变成黑盒——用户看得见它怎么理解的。</li>
</ul>
<hr>
<h2 id="2-智能推荐运营配置页也能变懂你一点">2. 智能推荐：运营配置页也能变「懂你」一点</h2>
<p>场景：</p>
<ul>
<li>运营在后台配置「某类用户看到哪些运营位/推荐产品」；</li>
<li>一般是靠经验拍脑袋选；</li>
<li>想利用历史数据做一点辅助决策。</li>
</ul>
<h3 id="21-我们做了什么">2.1 我们做了什么</h3>
<p>在原有「人工配置」的基础上，增加一个「AI 建议」按钮：</p></div><div class="post-footer">
        <a href="/posts/2023-11-01-ai-in-internal-tools/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E5%86%85%E9%83%A8%E7%B3%BB%E7%BB%9F/">内部系统</a>,&nbsp;<a href="/tags/%E8%BF%90%E8%90%A5%E4%B8%AD%E5%8F%B0/">运营中台</a>,&nbsp;<a href="/tags/%E6%99%BA%E8%83%BD%E6%90%9C%E7%B4%A2/">智能搜索</a>,&nbsp;<a href="/tags/%E6%8E%A8%E8%8D%90/">推荐</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2023-09-10-rag-for-project-docs/">用 RAG 做项目文档问答：从零搭一个 Demo</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>wuwj</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2023-09-10">2023-09-10</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/ai-%E5%BA%94%E7%94%A8/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>AI 应用</a></span></div><div class="content"><p>之前写过一篇「文档问答助手」的早期尝试，这次想更系统地从 RAG 角度，把整个过程讲清楚。</p>
<blockquote>
<p>RAG（Retrieval-Augmented Generation）= 检索增强生成<br>
简单说就是：先从你自己的文档里检索相关内容，再让大模型基于这些内容生成答案。</p>
</blockquote>
<p>这篇文章以「项目文档问答」为例，从零搭一个小 Demo。</p>
<hr>
<h2 id="1-目标让大模型读得懂我们的项目文档">1. 目标：让大模型「读得懂」我们的项目文档</h2>
<p>设定目标：</p>
<ul>
<li>知识来源：代码仓库中的 README、设计文档、接口说明等；</li>
<li>使用方式：在一个 Web 界面里提问，例如：
<ul>
<li>「私募投资人小程序支持哪些登陆方式？」</li>
<li>「电子合同模块的签署流程有哪些关键步骤？」</li>
</ul>
</li>
<li>期望回答：
<ul>
<li>基本准确；</li>
<li>回答中能指出「来自哪份文档」。</li>
</ul>
</li>
</ul>
<p>约束条件：</p>
<ul>
<li>不追求「端到端生产可用」，先搭一个可演示、可验证的 Demo；</li>
<li>优先用云端 Embedding + 向量库，而不是自己训模型。</li>
</ul>
<hr>
<h2 id="2-文档准备与切分">2. 文档准备与切分</h2>
<h3 id="21-文档来源">2.1 文档来源</h3>
<ul>
<li>Git 仓库中的 Markdown：<code>docs/</code> 目录、各项目 README；</li>
<li>内部 Wiki 导出的 HTML/Markdown；</li>
<li>部分 API 文档（Swagger/OpenAPI 转文本）。</li>
</ul>
<p>统一先转成 Markdown/纯文本，方便处理。</p>
<h3 id="22-切分策略">2.2 切分策略</h3>
<p>RAG 很关键的一步是「chunking」，即把长文档切成小段。<br>
我们采用的是：</p>
<ul>
<li><strong>按标题结构 + 字数混合切分</strong>；</li>
<li>每段控制在 300–600 字；</li>
<li>保留上级标题用于提供上下文。</li>
</ul>
<p>示例结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;docId&#34;</span>: <span style="color:#e6db74">&#34;fund-investor-miniapp&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;docTitle&#34;</span>: <span style="color:#e6db74">&#34;信e募投资人小程序技术方案&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;sectionPath&#34;</span>: [<span style="color:#e6db74">&#34;2. 技术架构&#34;</span>, <span style="color:#e6db74">&#34;2.1 前端技术栈&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;content&#34;</span>: <span style="color:#e6db74">&#34;前端采用 Vue3 + uni-app...&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;index&#34;</span>: <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>经验：</p></div><div class="post-footer">
        <a href="/posts/2023-09-10-rag-for-project-docs/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/rag/">RAG</a>,&nbsp;<a href="/tags/%E5%90%91%E9%87%8F%E6%A3%80%E7%B4%A2/">向量检索</a>,&nbsp;<a href="/tags/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/">项目文档</a>,&nbsp;<a href="/tags/%E7%9F%A5%E8%AF%86%E5%BA%93/">知识库</a></div></div>
</article><ul class="pagination"><li class="page-item ">
                    <span class="page-link">
                        <a href="/">1</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/2/">2</a>
                    </span>
                </li><li class="page-item active">
                    <span class="page-link">
                        <a href="/page/3/">3</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/4/">4</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/5/">5</a>
                    </span>
                </li><li class="page-item ">
                    <span class="page-link" aria-hidden="true">&hellip;</span>
                </li><li class="page-item ">
                    <span class="page-link">
                        <a href="/page/8/">8</a>
                    </span>
                </li></ul></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">wuwj</a></span>&nbsp;|&nbsp;<span class="license">CC BY-NC 4.0</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"data":{"id-1":"A quiet place to keep a record of things."},"search":{"highlightTag":"em","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":30},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
