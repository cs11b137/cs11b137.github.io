<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>AI 应用 on Saiga</title>
    <link>http://localhost:1313/categories/ai-%E5%BA%94%E7%94%A8/</link>
    <description>Recent content in AI 应用 on Saiga</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <managingEditor>wuwenzen@outlook.com (wuwj)</managingEditor>
    <webMaster>wuwenzen@outlook.com (wuwj)</webMaster>
    <lastBuildDate>Wed, 05 Nov 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/ai-%E5%BA%94%E7%94%A8/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>AI 时代的前端工程师：我的路线选择</title>
      <link>http://localhost:1313/posts/2025-11-05-career-and-ai-path/</link>
      <pubDate>Wed, 05 Nov 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-11-05-career-and-ai-path/</guid>
      <description>&lt;p&gt;过去几年，关于「前端会不会被 AI 替代」的讨论一直没停过。&lt;br&gt;&#xA;身边有人转去做全栈、有人转产品、有人去做大模型平台本身。&lt;/p&gt;&#xA;&lt;p&gt;这篇文章不谈「行业大趋势」，只谈&lt;strong&gt;我自己的路线选择&lt;/strong&gt;：&lt;br&gt;&#xA;在 AI 时代，作为一个长期做前端的人，我更想往哪里走？&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-先承认现实前端的确在变&#34;&gt;1. 先承认现实：前端的确在变&lt;/h2&gt;&#xA;&lt;p&gt;这两年有几个变化是肉眼可见的：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;写 UI 的门槛被 AI 急剧拉低&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;设计稿转代码、自然语言生成组件、自动补齐样式&lt;/li&gt;&#xA;&lt;li&gt;简单页面的实现不再是核心竞争力&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;工程复杂度在上升&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Monorepo、模块联邦、微前端、多端一体化&lt;/li&gt;&#xA;&lt;li&gt;打包、性能、可观测性、权限、配置化……这些都需要系统思考&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;AI 功能开始成为前端的一部分&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;搜索框变成「问答框」&lt;/li&gt;&#xA;&lt;li&gt;表单有了「智能填写建议」&lt;/li&gt;&#xA;&lt;li&gt;控制台有了「自然语言查询」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;简单说：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;「会写页面」不再稀缺，&lt;br&gt;&#xA;「能把复杂前端系统和 AI 能力组织起来」变得更重要。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-给自己定一个大方向ai-时代的前端架构--体验工程&#34;&gt;2. 给自己定一个大方向：AI 时代的「前端架构 / 体验工程」&lt;/h2&gt;&#xA;&lt;p&gt;我给自己的角色定位是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;偏前端架构 + 体验工程的人，顺带能把 AI 能力合理接入。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;具体来说，就是这几块能力：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;依然扎实的 Web / 多端前端基础&lt;/li&gt;&#xA;&lt;li&gt;能从 0 到 1 搭一套前端工程体系（构建、脚手架、组件库、监控）&lt;/li&gt;&#xA;&lt;li&gt;能和后端 / 算法 / 产品一起设计「AI 能力如何呈现在前端」&lt;/li&gt;&#xA;&lt;li&gt;关注的是&lt;strong&gt;完整链路体验&lt;/strong&gt;，而不仅仅是某一屏界面&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;不一定非要挂一个「架构师」的 title，&lt;br&gt;&#xA;但思维方式更像「为整个系统体验负责的人」。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-我觉得值得投入的几块技能&#34;&gt;3. 我觉得值得投入的几块技能&lt;/h2&gt;&#xA;&lt;h3 id=&#34;31-系统视角的前端工程&#34;&gt;3.1 系统视角的前端工程&lt;/h3&gt;&#xA;&lt;p&gt;继续把这些东西做深：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;中大型项目的模块化与分层&lt;/li&gt;&#xA;&lt;li&gt;Monorepo / 包管理 / 依赖治理&lt;/li&gt;&#xA;&lt;li&gt;DevOps / CI / CD / 前端可观测性&lt;/li&gt;&#xA;&lt;li&gt;权限、配置化、低代码能力&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;它们和 AI 有没有关系？&lt;br&gt;&#xA;短期看关系不大，但长期看：&lt;/p&gt;</description>
    </item>
    <item>
      <title>几个 AI 小项目的复盘：什么值得长期维护</title>
      <link>http://localhost:1313/posts/2025-08-03-ai-side-project-review/</link>
      <pubDate>Sun, 03 Aug 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-08-03-ai-side-project-review/</guid>
      <description>&lt;p&gt;过去一两年，陆陆续续做了不少和 AI 相关的小项目。&lt;br&gt;&#xA;有些上线一两个星期就被我自己放弃，有些反而默默地用到了现在。&lt;/p&gt;&#xA;&lt;p&gt;趁着空档，把这几类小项目复盘一下：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;哪些值得长期维护&lt;/li&gt;&#xA;&lt;li&gt;哪些适合当一次性实验&lt;/li&gt;&#xA;&lt;li&gt;哪些在想法层面很好，但现实里难以持续&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-个人知识库--ai-搜索最常用也最值维护&#34;&gt;1. 个人知识库 + AI 搜索：最常用，也最值维护&lt;/h2&gt;&#xA;&lt;h3 id=&#34;11-做了什么&#34;&gt;1.1 做了什么&lt;/h3&gt;&#xA;&lt;p&gt;这个就是前面写过的：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;把博客 / 笔记内容切分、向量化&lt;/li&gt;&#xA;&lt;li&gt;用向量检索 + 大模型做一个「只基于自己内容」的问答&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;12-为什么一直在用&#34;&gt;1.2 为什么一直在用？&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;明确解决了一个长期痛点&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;「我之前好像写过这个，但忘了在哪里」&lt;/li&gt;&#xA;&lt;li&gt;知识库 + AI 搜索给了一个非常直接的解法&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;需求稳定，维护成本低&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;内容只会增加，不会经常变来变去&lt;/li&gt;&#xA;&lt;li&gt;系统结构相对简单，坏了问题也好排&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;使用频率高且自然&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;写新东西前想查旧文章时会用&lt;/li&gt;&#xA;&lt;li&gt;工作中碰到类似问题也会顺手问一下&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;结论：&lt;strong&gt;这是那种一旦习惯了就离不开的工具，非常值得长期维护。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-ai-写作助手从独立产品变成一个流程中的环节&#34;&gt;2. AI 写作助手：从独立产品变成「一个流程中的环节」&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-一开始怎么做的&#34;&gt;2.1 一开始怎么做的？&lt;/h3&gt;&#xA;&lt;p&gt;最早我想做一个「写作工作台」：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在线编辑器 + 大纲生成 + 自动扩写&lt;/li&gt;&#xA;&lt;li&gt;一键生成摘要、标签、社交媒体文案&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;结果做着做着发现：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;编辑器永远写不赢现有工具（例如本地 Markdown 工具）&lt;/li&gt;&#xA;&lt;li&gt;真要写东西时，我还是回到习惯的环境里去写&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;22-后来怎么调整&#34;&gt;2.2 后来怎么调整？&lt;/h3&gt;&#xA;&lt;p&gt;后来干脆把它拆散：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;保留「提示词模板 + 一键调用模型」部分&lt;/li&gt;&#xA;&lt;li&gt;不再做自己的编辑器&lt;/li&gt;&#xA;&lt;li&gt;把这些步骤融到现有写作流程里（比如借助现有工具的插件、脚本）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;23-现在的状态&#34;&gt;2.3 现在的状态&lt;/h3&gt;&#xA;&lt;p&gt;现在的 AI 写作部分更像是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;一些我常用的 Prompt + 一些自动脚本，散落在不同工具里。&lt;/p&gt;</description>
    </item>
    <item>
      <title>一个「销售漏斗 &#43; AI 推荐系统」的架构草图</title>
      <link>http://localhost:1313/posts/2025-06-10-ai-sales-helper-architecture/</link>
      <pubDate>Tue, 10 Jun 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-06-10-ai-sales-helper-architecture/</guid>
      <description>&lt;p&gt;之前有个一直在脑子里打转的小项目想法：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;做一个面向 B 端业务的「销售线索 + AI 推荐」系统，&#xA;能够自动挖掘企业线索，给销售每天分配「今天优先联系谁」。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;后来花时间把这套东西从「想法」整理成了一个相对完整的架构草图。&lt;br&gt;&#xA;这篇就是对那张草图的文字版说明。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-业务目标帮销售做三件事&#34;&gt;1. 业务目标：帮销售做三件事&lt;/h2&gt;&#xA;&lt;p&gt;先不谈技术，先看它要帮销售做什么：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;发现客户&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;从公开网页、活动、行业名录等地方挖潜在线索&lt;/li&gt;&#xA;&lt;li&gt;大致知道这些企业做什么、在哪个国家、可能需要什么服务&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;管理漏斗&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;对每一个线索标记当前阶段：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;只是数据&lt;/li&gt;&#xA;&lt;li&gt;已经联系&lt;/li&gt;&#xA;&lt;li&gt;有意向&lt;/li&gt;&#xA;&lt;li&gt;报价中&lt;/li&gt;&#xA;&lt;li&gt;跟进中&lt;/li&gt;&#xA;&lt;li&gt;成交 / 关闭&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;每天给行动建议&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不让销售每天打开系统都迷茫：&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;「我今天到底该先联系谁？」&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;而是自动给出一份「今日推荐线索清单」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-总体架构从左到右看一遍&#34;&gt;2. 总体架构：从左到右看一遍&lt;/h2&gt;&#xA;&lt;p&gt;可以大致分成四层：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据获取层：爬虫 / 导入 / 手工录入&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据存储与建模层：线索库 + 客户库 + 行为库&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;算法与 AI 层：打分、分配、推荐理由生成&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;展示与交互层：Web 后台 + 销售工作台&lt;/strong&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;下面按层展开。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-数据获取层信息从哪里来&#34;&gt;3. 数据获取层：信息从哪里来？&lt;/h2&gt;&#xA;&lt;h3 id=&#34;31-爬虫--抓取&#34;&gt;3.1 爬虫 / 抓取&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;行业展会参展企业名单&lt;/li&gt;&#xA;&lt;li&gt;物流公司 / 外贸企业黄页&lt;/li&gt;&#xA;&lt;li&gt;公共招投标信息&lt;/li&gt;&#xA;&lt;li&gt;同行公司官网上的合作案例&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;抓取的原则：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;只抓 &lt;strong&gt;公开网页信息&lt;/strong&gt;，不触碰敏感或需要登录的数据&lt;/li&gt;&#xA;&lt;li&gt;遵守爬虫礼仪（限速、尊重 &lt;code&gt;robots.txt&lt;/code&gt; 等）&lt;/li&gt;&#xA;&lt;li&gt;做基础的去重和清洗&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;32-导入--手工录入&#34;&gt;3.2 导入 / 手工录入&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;销售现有 Excel、名片、线下活动名单&lt;/li&gt;&#xA;&lt;li&gt;手工在系统里新增线索（比如在电话里拿到的联系方式）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这些入口要做得尽量顺手，否则销售不会用。&lt;/p&gt;</description>
    </item>
    <item>
      <title>我现在写一篇技术博客的 AI 协作流程</title>
      <link>http://localhost:1313/posts/2025-04-15-ai-assisted-writing-flow/</link>
      <pubDate>Tue, 15 Apr 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-04-15-ai-assisted-writing-flow/</guid>
      <description>&lt;p&gt;以前写一篇技术博客，经常是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;打开编辑器 → 发呆半小时 → 终于写两段 → 忙别的去了。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这两年逐渐把 AI 融入写作流程之后，写作变得轻松了不少。&lt;br&gt;&#xA;这篇就简单记录一下我现在写一篇技术文时，会怎么用 AI 来协作。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-选题从零到写哪几个点&#34;&gt;1. 选题：从零到「写哪几个点」&lt;/h2&gt;&#xA;&lt;p&gt;通常起点是一个很模糊的念头，比如：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;「最近在搞 AI Review，好像有点东西可以写」&lt;/li&gt;&#xA;&lt;li&gt;「个人知识库做完了，想记录一下实践」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;我会先把这个念头直接扔给 AI：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;「我想写一篇面向前端工程师的博客，主题是 XXX，对象是有 3～5 年经验的人，帮我列 5～8 个可写的角度。」&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;从返回的角度里，挑 2～3 个自己最有感觉的，作为候选方向。&lt;br&gt;&#xA;很多时候 AI 给的那个「结构化视角」，能帮自己把脑子理顺。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-大纲阶段确定文章结构而不是让-ai-代写&#34;&gt;2. 大纲阶段：确定文章结构，而不是让 AI 代写&lt;/h2&gt;&#xA;&lt;p&gt;确定方向之后，第二步才是大纲。&lt;br&gt;&#xA;这里我会比较主动，把自己的想法写出来：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;我想讲哪些实践&lt;/li&gt;&#xA;&lt;li&gt;哪些坑一定要写进去&lt;/li&gt;&#xA;&lt;li&gt;哪些是背景、不想展开&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;然后让 AI 来「帮我补齐」：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;「这是我的大致大纲，你帮我看看有没有明显缺的部分，顺便按阅读顺序帮我调整一下结构。」&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;AI 常给出的价值在于：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提醒我「可以加一个问题背景或动机」&lt;/li&gt;&#xA;&lt;li&gt;把顺序改得更平滑，比如先讲问题再讲方案&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;但最后定稿仍然是我自己拍板。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-草稿阶段辅助展开而不是从-0-到-1-代写&#34;&gt;3. 草稿阶段：辅助展开，而不是从 0 到 1 代写&lt;/h2&gt;&#xA;&lt;p&gt;大纲确定后，每一小节，我会采用一种「半手动」方式：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;先用要点列出我想说的内容：&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 技术现状：目前项目里怎么做的&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 痛点：哪些地方做起来很别扭&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 尝试方案：试过什么，失败在哪&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- 最后采用的方案：为什么选择它&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;&#xA;&lt;li&gt;然后请 AI 基于要点帮我扩写成一段自然语言草稿。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;这样做有几个好处：&lt;/p&gt;</description>
    </item>
    <item>
      <title>给个人网站加一个 AI 搜索框</title>
      <link>http://localhost:1313/posts/2025-01-25-ai-powered-search-on-blog/</link>
      <pubDate>Sat, 25 Jan 2025 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2025-01-25-ai-powered-search-on-blog/</guid>
      <description>&lt;p&gt;这篇算是给我自己的一份施工日志：记录我是怎么在个人网站上加一个「AI 搜索框」的。&lt;/p&gt;&#xA;&lt;p&gt;目标很简单：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;让搜索不再只靠关键字，而是能用自然语言问问题，基于博客内容给出回答。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;比如：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;「你之前是怎么做前端性能监控的？」&lt;/li&gt;&#xA;&lt;li&gt;「Monorepo 迁移里有哪些坑？」&lt;/li&gt;&#xA;&lt;li&gt;「AI 和前端结合有什么实践？」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;都可以直接问。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-先想清楚ai-搜索到底要搜什么&#34;&gt;1. 先想清楚：AI 搜索到底要搜什么？&lt;/h2&gt;&#xA;&lt;p&gt;我给自己的约束：&lt;strong&gt;只基于本站内容&lt;/strong&gt;。&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不接入外部网络&lt;/li&gt;&#xA;&lt;li&gt;不回答「全球最佳框架是哪一个」这种问题&lt;/li&gt;&#xA;&lt;li&gt;只回答「我自己写过什么」「我自己是怎么想的」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这样有几个好处：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;不用考虑太复杂的内容安全问题&lt;/li&gt;&#xA;&lt;li&gt;回答的质量和风格更统一&lt;/li&gt;&#xA;&lt;li&gt;搜索结果更像是「帮我找回过去的自己」&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-数据准备从-hugo-的-markdown-出发&#34;&gt;2. 数据准备：从 Hugo 的 Markdown 出发&lt;/h2&gt;&#xA;&lt;p&gt;网站用的是 Hugo，文章都在 &lt;code&gt;content/posts&lt;/code&gt; 中。&lt;/p&gt;&#xA;&lt;p&gt;做了一个简单的数据导出脚本：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;遍历所有 Markdown 文件&lt;/li&gt;&#xA;&lt;li&gt;解析 front matter（标题、日期、标签）&lt;/li&gt;&#xA;&lt;li&gt;提取正文内容，按标题层级切分成若干小段&lt;/li&gt;&#xA;&lt;li&gt;为每个小段生成一个唯一 ID + 一些元信息&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;伪代码大概是：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Chunk&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;title&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;date&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;tags&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;[]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;sectionPath&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;[]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;content&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这些 &lt;code&gt;Chunk&lt;/code&gt; 之后会被送去做向量化。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-向量化与向量库把内容变成可相似度检索的形式&#34;&gt;3. 向量化与向量库：把内容变成「可相似度检索」的形式&lt;/h2&gt;&#xA;&lt;h3 id=&#34;31-嵌入embedding&#34;&gt;3.1 嵌入（Embedding）&lt;/h3&gt;&#xA;&lt;p&gt;对每个片段调用 Embedding 模型，生成一个向量：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;embedding&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;embed&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;chunk&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;content&lt;/span&gt;)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// embedding: number[]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;向量和 metadata 一起存起来。&lt;/p&gt;</description>
    </item>
    <item>
      <title>用 Hugo &#43; 向量库搭一个个人知识库 &#43; AI 搜索</title>
      <link>http://localhost:1313/posts/2024-08-10-personal-knowledge-base-with-ai/</link>
      <pubDate>Sat, 10 Aug 2024 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2024-08-10-personal-knowledge-base-with-ai/</guid>
      <description>&lt;p&gt;写博客、记笔记时间久了，经常会有这种感觉：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;某个问题我好像以前写过，但完全想不起来写在哪里了。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;传统搜索要么靠关键词，要么翻目录，其实挺费劲。&lt;br&gt;&#xA;于是干脆做了一件事：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;把 Hugo 博客里的文章当成「知识库」，用向量检索 + 大模型搭一个自己的 AI 搜索。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;下面简单记录一下从 0 到 1 的过程。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-数据来源直接用-hugo-的-markdown&#34;&gt;1. 数据来源：直接用 Hugo 的 Markdown&lt;/h2&gt;&#xA;&lt;p&gt;因为网站本身就是 Hugo，所以数据天然在本地：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;content/posts/**/*.md&lt;/code&gt;：原始文章&lt;/li&gt;&#xA;&lt;li&gt;Front matter 里有标题、日期、标签等信息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;相比解析生成后的 HTML，我更倾向直接读 Markdown：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;结构简单&lt;/li&gt;&#xA;&lt;li&gt;不用做 HTML 清洗&lt;/li&gt;&#xA;&lt;li&gt;标题、层级天然存在&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;简单写个脚本：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;遍历 &lt;code&gt;content/posts&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;解析 front matter（用现成库即可）&lt;/li&gt;&#xA;&lt;li&gt;拿到正文内容&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-文档切分从文章到片段&#34;&gt;2. 文档切分：从文章到「片段」&lt;/h2&gt;&#xA;&lt;p&gt;RAG 的关键是切分策略。&lt;br&gt;&#xA;我采用了一个折中方案：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;按二级/三级标题做初步分段（&lt;code&gt;##&lt;/code&gt; / &lt;code&gt;###&lt;/code&gt;）&lt;/li&gt;&#xA;&lt;li&gt;每一段如果太长，再按字数（比如 300～500 字）切成多个片段&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;每个片段保存的信息大致是：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsonc&#34; data-lang=&#34;jsonc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2023-09-10-rag-for-project-docs#section-3-1&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;postSlug&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2023-09-10-rag-for-project-docs&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;用 RAG 做项目文档问答：从零搭一个 Demo&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;date&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2023-09-10&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;sectionPath&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3. 向量化：Embedding 与向量库&amp;#34;&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;……这一小段的正文……&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;tags&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RAG&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;向量检索&amp;#34;&lt;/span&gt;]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这些 metadata 会用于后续结果展示和过滤。&lt;/p&gt;</description>
    </item>
    <item>
      <title>在金融前端里用 AI 做风险提示与文案生成</title>
      <link>http://localhost:1313/posts/2024-06-22-ai-for-fintech-risk-hints/</link>
      <pubDate>Sat, 22 Jun 2024 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2024-06-22-ai-for-fintech-risk-hints/</guid>
      <description>&lt;p&gt;金融业务的前端开发，有一块很「非技术」但非常重要的内容：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;各种风险提示、重要说明、免责声明。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这些文案往往：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;又长又硬，措辞要非常谨慎&lt;/li&gt;&#xA;&lt;li&gt;改一两个字都要走产品 / 合规 / 法务流程&lt;/li&gt;&#xA;&lt;li&gt;但监管、业务又在不断变化&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;于是就有一个自然的想法：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;能不能让 AI 帮我们「起草」这些文案，让人只负责最后确认？&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这篇文章就记录一下在金融前端场景中，用 AI 做风险提示与文案生成的一些实践。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-先定边界ai-能做什么不能做什么&#34;&gt;1. 先定边界：AI 能做什么，不能做什么？&lt;/h2&gt;&#xA;&lt;p&gt;一句话：&lt;strong&gt;AI 只负责辅助，不负责最终结论。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以做的事情：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;根据已有条款，生成更易懂的「短版说明」&lt;/li&gt;&#xA;&lt;li&gt;针对不同用户类型，调整语气和强调点&lt;/li&gt;&#xA;&lt;li&gt;帮工程师/产品解释复杂条款的含义&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;绝对不能做的事情：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;修改风险等级、收益描述等关键事实&lt;/li&gt;&#xA;&lt;li&gt;给出任何「收益承诺」「投资建议」&lt;/li&gt;&#xA;&lt;li&gt;跳过合规流程，直接把生成文案上到生产页面&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;最终对外展示的内容，责任仍然在产品 / 合规，而不是模型。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-文案来源让-ai-基于权威文本工作&#34;&gt;2. 文案来源：让 AI 基于「权威文本」工作&lt;/h2&gt;&#xA;&lt;p&gt;为了避免 AI 瞎编，我们没有让它凭空创作，而是：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;收集已经过审的文案与条款&lt;/li&gt;&#xA;&lt;li&gt;做成一个小型「文案知识库」（或者直接附在 Prompt/上下文里）&lt;/li&gt;&#xA;&lt;li&gt;要求 AI 在此基础上做改写、摘要，而不是凭空编造&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;示例 Prompt：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;下面是一段已经过合规审核的风险提示，请你在不改变关键信息的前提下，用更易懂的中文生成一段 80～120 字的短说明，给普通投资人阅读。&lt;br&gt;&#xA;不允许添加任何「保证收益」「稳赚不赔」等内容。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这样 AI 更像「翻译器」而不是「文案创作人」。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;3-用法一长条款--短提示的组合&#34;&gt;3. 用法一：长条款 + 短提示的组合&lt;/h2&gt;&#xA;&lt;p&gt;实际页面里经常这样设计：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;显示一段简短提示（1～2 行文案）&lt;/li&gt;&#xA;&lt;li&gt;下面有「展开阅读完整风险揭示」链接&lt;/li&gt;&#xA;&lt;li&gt;点击后查看长条款&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这里可以让 AI 帮忙生成简短提示部分：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;输入：完整条款 + 目标长度 + 目标受众&lt;/li&gt;&#xA;&lt;li&gt;输出：1 段短文案草稿&lt;/li&gt;&#xA;&lt;li&gt;经过产品 / 合规审阅后，挂在页面上使用&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;完整条款仍然保持原文，不做模型改写。&lt;/p&gt;</description>
    </item>
    <item>
      <title>让 AI 帮我做前端性能分析报告</title>
      <link>http://localhost:1313/posts/2024-05-01-ai-performance-analyzer/</link>
      <pubDate>Wed, 01 May 2024 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2024-05-01-ai-performance-analyzer/</guid>
      <description>&lt;p&gt;前端做性能优化，两个常见痛点：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;报表很数据化，非技术同学看不懂&lt;/li&gt;&#xA;&lt;li&gt;每次写性能报告都很花时间：看指标 → 找问题 → 翻译成大家听得懂的结论&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;于是试了一件事：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;我负责把数据准备好，AI 帮我写一份「结构化的性能分析报告」，我只做最后校对。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-输入与输出长啥样&#34;&gt;1. 输入与输出长啥样？&lt;/h2&gt;&#xA;&lt;h3 id=&#34;11-输入数据&#34;&gt;1.1 输入数据&lt;/h3&gt;&#xA;&lt;p&gt;主要有两部分：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;Lighthouse JSON 报告&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;性能得分&lt;/li&gt;&#xA;&lt;li&gt;LCP / CLS / TBT / TTI 等指标&lt;/li&gt;&#xA;&lt;li&gt;各种「机会」与「诊断」信息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;真实用户监控数据（RUM）&lt;/strong&gt;（可选）&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;最近一段时间的 LCP P75、FCP P75&lt;/li&gt;&#xA;&lt;li&gt;不同地区/设备的耗时对比&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;12-期望输出&#34;&gt;1.2 期望输出&lt;/h3&gt;&#xA;&lt;p&gt;希望 AI 给我的报告包含：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;一段 1～2 句话的性能整体概览&lt;/li&gt;&#xA;&lt;li&gt;用人话解释关键指标的含义和当前水平&lt;/li&gt;&#xA;&lt;li&gt;列出 3～5 个主要问题（按影响排序）&lt;/li&gt;&#xA;&lt;li&gt;每个问题配上具体可执行的优化建议&lt;/li&gt;&#xA;&lt;li&gt;告诉我「先做哪几件事最划算」&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-先做精简给-ai-的不是原始-json&#34;&gt;2. 先做精简：给 AI 的不是原始 JSON&lt;/h2&gt;&#xA;&lt;p&gt;原始 Lighthouse JSON 体积很大，直接给模型既浪费 Token，也容易让它迷路。&lt;br&gt;&#xA;所以写了一个小脚本，把它整理成简版结构：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsonc&#34; data-lang=&#34;jsonc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://example.com&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;score&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.72&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;metrics&amp;#34;&lt;/span&gt;: {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;LCP&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;3800&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;CLS&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0.11&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;FID&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;TTI&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;4200&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;opportunities&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;减少未使用的 JavaScript&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;estimatedSavingsMs&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;800&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;消除阻塞渲染的资源&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;estimatedSavingsMs&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;600&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;diagnostics&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;主线程工作过多&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;部分图片未压缩&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;rum&amp;#34;&lt;/span&gt;: {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;LCP_p75&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;4200&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;FCP_p75&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;2100&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;sampleCount&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;120000&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这样输入既足够有信息量，又相对稳定。&lt;/p&gt;</description>
    </item>
    <item>
      <title>用大模型做一个「表单配置助手」</title>
      <link>http://localhost:1313/posts/2024-02-05-ai-powered-form-builder/</link>
      <pubDate>Mon, 05 Feb 2024 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2024-02-05-ai-powered-form-builder/</guid>
      <description>&lt;p&gt;在很多中台系统里，「加一个表单页面」是非常常见的需求：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;运营要配活动&lt;/li&gt;&#xA;&lt;li&gt;风控要配规则&lt;/li&gt;&#xA;&lt;li&gt;产品要加信息收集表单&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;常规流程比较重：写需求 → 画原型 → 前端实现 → 联调 → 上线。&lt;br&gt;&#xA;对于那些只是字段多、变更频率高的小表单，其实有点浪费。&lt;/p&gt;&#xA;&lt;p&gt;所以我们尝试做了一个小工具：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;运营用自然语言描述表单，大模型帮忙产出一份「表单配置 JSON」，前端根据配置自动渲染。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这篇文章就简单记录一下实现思路。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-目标从一句话到一份表单配置&#34;&gt;1. 目标：从一句话到一份表单配置&lt;/h2&gt;&#xA;&lt;p&gt;我们给自己的目标很克制：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;输入&lt;/strong&gt;：一段自然语言描述，例如&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;“做一个录入投资人基本信息的表单，需要姓名、手机号、证件类型和证件号，手机号必填要校验格式，证件类型从下拉里选身份证/护照。”&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;输出&lt;/strong&gt;：一份前端能直接使用的配置 JSON：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;字段列表&lt;/li&gt;&#xA;&lt;li&gt;字段类型、标签、占位&lt;/li&gt;&#xA;&lt;li&gt;是否必填、校验规则&lt;/li&gt;&#xA;&lt;li&gt;下拉选项等&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;前端只负责：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;把描述提交给后端&lt;/li&gt;&#xA;&lt;li&gt;拿到配置 JSON&lt;/li&gt;&#xA;&lt;li&gt;交给通用 &lt;code&gt;&amp;lt;FormRenderer :config=&amp;quot;formConfig&amp;quot; /&amp;gt;&lt;/code&gt; 渲染&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-配置格式先把机器读得懂定义好&#34;&gt;2. 配置格式：先把「机器读得懂」定义好&lt;/h2&gt;&#xA;&lt;p&gt;要让大模型产出可用结果，首先要有一份清晰的配置格式。示例：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsonc&#34; data-lang=&#34;jsonc&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;投资人信息录入&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;layout&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;vertical&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;fields&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;姓名&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;required&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;placeholder&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;请输入姓名&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mobile&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;手机号&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;required&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;rules&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;regex&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;pattern&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^1\\d{10}$&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;请输入 11 位手机号&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;idType&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;证件类型&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;select&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;required&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;options&amp;#34;&lt;/span&gt;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        { &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;居民身份证&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ID_CARD&amp;#34;&lt;/span&gt; },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        { &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;护照&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PASSPORT&amp;#34;&lt;/span&gt; }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;idNo&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;label&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;证件号码&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;input&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;required&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;前端已经有配套组件：&lt;/p&gt;</description>
    </item>
    <item>
      <title>在内部运营/中台工具里加一点 AI：从搜索到推荐</title>
      <link>http://localhost:1313/posts/2023-11-01-ai-in-internal-tools/</link>
      <pubDate>Wed, 01 Nov 2023 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2023-11-01-ai-in-internal-tools/</guid>
      <description>&lt;p&gt;相比 C 端产品，「内部运营/中台工具」看起来没那么光鲜，界面经常是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;一堆表格、一堆配置、一堆筛选项。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;但正因为如此，AI 在这里往往很好落地：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;用户数量受控，易于试点；&lt;/li&gt;&#xA;&lt;li&gt;业务流程清晰，方便评估效果；&lt;/li&gt;&#xA;&lt;li&gt;哪怕只提升一点效率，整体价值也不小。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这篇文章就分享几个我们在内部工具里「加一点 AI」的尝试：从搜索到推荐再到智能填写。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-智能搜索从条件筛选到自然语言搜索&#34;&gt;1. 智能搜索：从「条件筛选」到「自然语言搜索」&lt;/h2&gt;&#xA;&lt;h3 id=&#34;11-传统方式的痛点&#34;&gt;1.1 传统方式的痛点&lt;/h3&gt;&#xA;&lt;p&gt;运营同学以前查数据要：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;打开一个复杂查询页；&lt;/li&gt;&#xA;&lt;li&gt;选择 N 个下拉框（业务线、产品、日期区间、状态…）；&lt;/li&gt;&#xA;&lt;li&gt;点击查询，发现忘记勾某个条件，再重新来一次。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;于是我们考虑加一个入口：&lt;strong&gt;自然语言搜索&lt;/strong&gt;。&lt;/p&gt;&#xA;&lt;p&gt;例如：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;「最近 7 天上海地区的私募新增高净值客户」&lt;br&gt;&#xA;「失败次数超过 3 次的合同签署记录」&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;h3 id=&#34;12-技术方案&#34;&gt;1.2 技术方案&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;用大模型把自然语言解析成结构化查询条件；&lt;/li&gt;&#xA;&lt;li&gt;再把这些条件映射到后端已有查询接口；&lt;/li&gt;&#xA;&lt;li&gt;最终仍然走「原有 SQL / ES 查询逻辑」。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;伪代码示意：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;prompt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;你是查询构建助手。请将用户的自然语言查询转换为 JSON 条件。...&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;llmResult&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callLLM&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;prompt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;userQuery&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;conditions&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;llmResult&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callSearchAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;conditions&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;关键点：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;不直接让模型生成 SQL&lt;/strong&gt;（安全风险 &amp;amp; 不可控）；&lt;/li&gt;&#xA;&lt;li&gt;而是生成一个受控的 JSON 条件对象。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;13-前端体验&#34;&gt;1.3 前端体验&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;搜索框下方展示「解析出的条件」，让用户确认；&lt;/li&gt;&#xA;&lt;li&gt;支持一键切换到「高级筛选」视图，展示同样条件；&lt;/li&gt;&#xA;&lt;li&gt;避免让 AI 变成黑盒——用户看得见它怎么理解的。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-智能推荐运营配置页也能变懂你一点&#34;&gt;2. 智能推荐：运营配置页也能变「懂你」一点&lt;/h2&gt;&#xA;&lt;p&gt;场景：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;运营在后台配置「某类用户看到哪些运营位/推荐产品」；&lt;/li&gt;&#xA;&lt;li&gt;一般是靠经验拍脑袋选；&lt;/li&gt;&#xA;&lt;li&gt;想利用历史数据做一点辅助决策。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;21-我们做了什么&#34;&gt;2.1 我们做了什么&lt;/h3&gt;&#xA;&lt;p&gt;在原有「人工配置」的基础上，增加一个「AI 建议」按钮：&lt;/p&gt;</description>
    </item>
    <item>
      <title>用 RAG 做项目文档问答：从零搭一个 Demo</title>
      <link>http://localhost:1313/posts/2023-09-10-rag-for-project-docs/</link>
      <pubDate>Sun, 10 Sep 2023 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2023-09-10-rag-for-project-docs/</guid>
      <description>&lt;p&gt;之前写过一篇「文档问答助手」的早期尝试，这次想更系统地从 RAG 角度，把整个过程讲清楚。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;RAG（Retrieval-Augmented Generation）= 检索增强生成&lt;br&gt;&#xA;简单说就是：先从你自己的文档里检索相关内容，再让大模型基于这些内容生成答案。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;这篇文章以「项目文档问答」为例，从零搭一个小 Demo。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-目标让大模型读得懂我们的项目文档&#34;&gt;1. 目标：让大模型「读得懂」我们的项目文档&lt;/h2&gt;&#xA;&lt;p&gt;设定目标：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;知识来源：代码仓库中的 README、设计文档、接口说明等；&lt;/li&gt;&#xA;&lt;li&gt;使用方式：在一个 Web 界面里提问，例如：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;「私募投资人小程序支持哪些登陆方式？」&lt;/li&gt;&#xA;&lt;li&gt;「电子合同模块的签署流程有哪些关键步骤？」&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;期望回答：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;基本准确；&lt;/li&gt;&#xA;&lt;li&gt;回答中能指出「来自哪份文档」。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;约束条件：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不追求「端到端生产可用」，先搭一个可演示、可验证的 Demo；&lt;/li&gt;&#xA;&lt;li&gt;优先用云端 Embedding + 向量库，而不是自己训模型。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-文档准备与切分&#34;&gt;2. 文档准备与切分&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-文档来源&#34;&gt;2.1 文档来源&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Git 仓库中的 Markdown：&lt;code&gt;docs/&lt;/code&gt; 目录、各项目 README；&lt;/li&gt;&#xA;&lt;li&gt;内部 Wiki 导出的 HTML/Markdown；&lt;/li&gt;&#xA;&lt;li&gt;部分 API 文档（Swagger/OpenAPI 转文本）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;统一先转成 Markdown/纯文本，方便处理。&lt;/p&gt;&#xA;&lt;h3 id=&#34;22-切分策略&#34;&gt;2.2 切分策略&lt;/h3&gt;&#xA;&lt;p&gt;RAG 很关键的一步是「chunking」，即把长文档切成小段。&lt;br&gt;&#xA;我们采用的是：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;按标题结构 + 字数混合切分&lt;/strong&gt;；&lt;/li&gt;&#xA;&lt;li&gt;每段控制在 300–600 字；&lt;/li&gt;&#xA;&lt;li&gt;保留上级标题用于提供上下文。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;示例结构：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;docId&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fund-investor-miniapp&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;docTitle&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;信e募投资人小程序技术方案&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;sectionPath&amp;#34;&lt;/span&gt;: [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2. 技术架构&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2.1 前端技术栈&amp;#34;&lt;/span&gt;],&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;前端采用 Vue3 + uni-app...&amp;#34;&lt;/span&gt;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;index&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;经验：&lt;/p&gt;</description>
    </item>
    <item>
      <title>调用大模型 API 的几个最佳实践：重试、降级与审计</title>
      <link>http://localhost:1313/posts/2023-06-05-ai-api-best-practices/</link>
      <pubDate>Mon, 05 Jun 2023 00:00:00 +0000</pubDate><author>wuwenzen@outlook.com (wuwj)</author>
      <guid>http://localhost:1313/posts/2023-06-05-ai-api-best-practices/</guid>
      <description>&lt;p&gt;刚开始用大模型 API 时，大家一般关心的是：&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;这个模型效果好不好？回答聪不聪明？&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;但当你真的把它作为「线上能力」接入产品时，会发现很多工程问题：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;API 偶尔超时 / 报错怎么办？&lt;/li&gt;&#xA;&lt;li&gt;费用怎么控？&lt;/li&gt;&#xA;&lt;li&gt;返回内容里如果有敏感信息怎么办？&lt;/li&gt;&#xA;&lt;li&gt;出了问题，怎么排查某次请求？&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这篇文章就是从这些「落地问题」出发，整理几条接入大模型 API 的最佳实践。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-超时与重试别把前端一直挂着&#34;&gt;1. 超时与重试：别把前端一直挂着&lt;/h2&gt;&#xA;&lt;h3 id=&#34;11-超时要有明确上限&#34;&gt;1.1 超时要有明确上限&lt;/h3&gt;&#xA;&lt;p&gt;大模型生成本身需要时间，如果不设超时，前端可能会一直转圈。&lt;br&gt;&#xA;我们一般做法：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;在 BFF / 中间层对每个调用设定超时时间（例如 10–15 秒）；&lt;/li&gt;&#xA;&lt;li&gt;超时后直接返回「超时错误」，由前端给出友好提示；&lt;/li&gt;&#xA;&lt;li&gt;前端也设置请求超时，避免被挂死。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;12-重试策略&#34;&gt;1.2 重试策略&lt;/h3&gt;&#xA;&lt;p&gt;常见错误类型：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;临时网络抖动；&lt;/li&gt;&#xA;&lt;li&gt;API 限流（429）；&lt;/li&gt;&#xA;&lt;li&gt;服务端偶发异常。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;对&lt;strong&gt;幂等请求&lt;/strong&gt;（比如生成建议文案），我们采用：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;指数退避重试&lt;/strong&gt;：例如最多重试 2 次，间隔 500ms / 1000ms；&lt;/li&gt;&#xA;&lt;li&gt;遇到某些错误码（如 4xx 中的参数错误）不重试。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;伪代码：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callLLMWithRetry&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;payload&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;maxRetry&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;attempt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callLLM&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;payload&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;any&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;isRetryableError&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;attempt&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;maxRetry&lt;/span&gt;) {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;attempt&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;attempt&lt;/span&gt;);&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-降级模型不可用时要有备胎&#34;&gt;2. 降级：模型不可用时要有「备胎」&lt;/h2&gt;&#xA;&lt;p&gt;大模型 API 作为外部依赖，不可能 100% 可用。&lt;br&gt;&#xA;因此建议设计「降级方案」：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
